var username,token="";const regex=/<!--([^)]+)-->/;var example_post=$(".post").clone().removeClass("visually-hidden");async function load_user(){var t=window.location.search;if(t&&(username=t.split("?user=")[1])){$("#username").text(username);var e=await get_readme();if(e){var o=await get_markdown_render(e);o&&$("#user-readme").append(o)}var s=await get_user_posts();if(0==s.total_count)return $("#empty-profile-hr").removeClass("visually-hidden"),void $("#empty-profile").removeClass("visually-hidden");s.items.forEach(displayPost)}}function displayPost(t){let e=$(example_post).clone(),o=t.body.match(regex);o&&$(e).find(".post-image").attr("src",o[1]),$(e).removeClass("visually-hidden"),$(e).find(".post-title").text(t.title.substring(10)),$(e).find(".post-body").text(t.body),$(e).find(".post-link").attr("href","post.html?issue="+t.url.split("https://api.github.com/repos/")[1]),$(e).find(".upvote-button").attr("url",t.url+"/reactions"),$(e).find(".downvote-button").attr("url",t.url+"/reactions"),$(e).find(".post-user").attr("href","user.html?user="+t.user.login),$(e).find(".post-user").text(t.user.login),$(e).find(".post-user-image").attr("src",t.user.avatar_url),$(e).find(".post-score").text("ðŸ”¥ "+t.reactions["+1"]),$("#post-feed").append(e)}function get_readme(){return fetch("https://raw.githubusercontent.com/"+username+"/"+username+"/main/README.md",{method:"GET"}).then((t=>!!t.ok&&t.text()))}function get_markdown_render(t){return fetch("https://api.github.com/markdown",{method:"POST",headers:{Accept:"application/vnd.github+json",Authorization:`token ${token}`},body:JSON.stringify({text:t})}).then((t=>!!t.ok&&t.text()))}function get_user_posts(){return fetch("https://api.github.com/search/issues?q="+encodeURIComponent('"#gitlounge "author:'+username+" sort:reactions-+1"),{method:"GET",headers:{Accept:"application/vnd.github+json",Authorization:`token ${token}`}}).then((t=>t.json()))}Cookies.get("token")&&($("#github-login-button").addClass("visually-hidden"),$("#exit-button").removeClass("visually-hidden"),token=Cookies.get("token")),load_user();