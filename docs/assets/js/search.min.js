var token,username,unauthorized=!0,example_post=$(".post").clone().removeClass("visually-hidden");async function search(){unauthorized&&(token="");var e=$("#search-input").val();if(e.length){$("#no-results").addClass("visually-hidden"),$(".post").remove();var t=await get_issues_from_search(token,e);0!=t.total_count?t.items.forEach(displayPost):$("#no-results").removeClass("visually-hidden")}else $("#search-input").focus()}function get_issues_from_search(e,t){return fetch("https://api.github.com/search/issues?q="+encodeURIComponent('"#gitlounge" '+t+" sort:reactions-+1"),{method:"GET",headers:{Accept:"application/vnd.github+json",Authorization:`token ${e}`}}).then((e=>e.json()))}function displayPost(e){let t=$(example_post).clone();$(t).removeClass("visually-hidden"),$(t).find(".post-title").text(e.title.substring(10)),$(t).find(".post-body").text(e.body),$(t).find(".post-link").attr("href","post.html?issue="+e.url.split("https://api.github.com/repos/")[1]),$(t).find(".upvote-button").attr("url",e.url+"/reactions"),$(t).find(".downvote-button").attr("url",e.url+"/reactions"),$(t).find(".post-user").attr("href","user.html?user="+e.user.login),$(t).find(".post-user").text(e.user.login),$(t).find(".post-user-image").attr("src",e.user.avatar_url),$(t).find(".post-score").text("ðŸ”¥ "+e.reactions["+1"]),$("#post-feed").append(t)}Cookies.get("token")&&($("#github-login-button").addClass("visually-hidden"),$("#exit-button").removeClass("visually-hidden"),token=Cookies.get("token"),username=Cookies.get("username"),unauthorized=!1),unauthorized&&window.location.replace("/"),$("#search-input").on("keyup",(function(e){"Enter"==e.key&&search()}));