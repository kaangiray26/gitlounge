var token,unauthorized=!0,example_post=$(".post").clone().removeClass("visually-hidden");async function verify_login(){Cookies.get("token")&&($("#github-login-button").addClass("visually-hidden"),$("#exit-button").removeClass("visually-hidden"),token=Cookies.get("token"),unauthorized=!1),trends()}async function login(){window.location.replace("https://github.com/login/oauth/authorize?client_id=0d1b74e91be0580beb25&redirect_uri=https://gitlounge.buzl.uk/oauth.html&scope=public_repo")}async function logout(){Cookies.remove("token"),window.location.replace("/")}async function trends(){unauthorized&&(token="");var t=await get_issues(token);0!=t.total_count&&t.items.forEach(displayPost)}function displayPost(t){console.log(t);let e=$(example_post).clone();$(e).removeClass("visually-hidden"),$(e).find(".post-title").text(t.title.substring(10)),$(e).find(".post-body").text(t.body),$(e).find(".post-link").attr("href","post.html?id="+t.id),$(e).find(".post-user").attr("href","user.html?id="+t.user.login),$(e).find(".post-user").text(t.user.login),$(e).find(".post-score").text("❤️ "+t.score),$("#post-feed").append(e),console.log("Item added.")}function get_issues(t){return fetch("https://api.github.com/search/issues?q=gitlounge&sort=reactions-+1",{method:"GET",headers:{Accept:"application/vnd.github+json",Authorization:`token ${t}`}}).then((t=>t.json()))}verify_login();